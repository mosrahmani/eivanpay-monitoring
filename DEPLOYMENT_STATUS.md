# ฺฏุฒุงุฑุด ูุถุนุช ุขูุงุฏูโุณุงุฒ ุงุณุชูุฑุงุฑ ูพุฑูฺู

**ุชุงุฑุฎ ุจุฑุฑุณ:** $(date)

## โ ููุงุฑุฏ ุชฺฉูู ุดุฏู

- โ ุณุงุฎุชุงุฑ ูพุฑูฺู ฺฉุงูู ุงุณุช
- โ ูุงูโูุง Docker Compose ุขูุงุฏู ุงุณุช
- โ ุงุณฺฉุฑูพุชโูุง ูุฏุฑุช ููุฌูุฏ ุงุณุช
- โ ูุณุชูุฏุงุช ฺฉุงูู ุงุณุช
- โ .gitignore ุจุฑุง ูุงูโูุง ุญุณุงุณ ุชูุธู ุดุฏู ุงุณุช

## โ๏ธ ููุงุฑุฏ ูุงุฒููุฏ ุชูุธู (ูุจู ุงุฒ ุงุณุชูุฑุงุฑ)

### 1. ูุงู Environment Variables (.env)

**ูุถุนุช:** โ ูุงู `.env` ูุฌูุฏ ูุฏุงุฑุฏ

**ุงูุฏุงูุงุช ูุงุฒู:**
```bash
# ฺฉูพ ุงุฒ template
cp .env.example .env

# ูุฑุงุด ูุงู .env ู ุชูุธู ููุงุฏุฑ ุฒุฑ:
# - POSTGRES_HOST, POSTGRES_USER, POSTGRES_PASSWORD, POSTGRES_DB
# - REDIS_HOST, REDIS_PASSWORD
# - TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID
# - GRAFANA_ADMIN_USER, GRAFANA_ADMIN_PASSWORD (ุญุฏุงูู 32 ฺฉุงุฑุงฺฉุชุฑ)
# - GRAFANA_ROOT_URL, PROMETHEUS_EXTERNAL_URL, ALERTMANAGER_EXTERNAL_URL
# - API_HOST, GATEWAY_HOST, NGINX_HOST
# - PROMETHEUS_API_KEY (ุญุฏุงูู 32 ฺฉุงุฑุงฺฉุชุฑ)

# ุชูุธู ุฏุณุชุฑุณ
chmod 600 .env
```

### 2. ฺฏูุงููุงููโูุง SSL

**ูุถุนุช:** โ ฺฏูุงููุงููโูุง SSL ููุฌูุฏ ูุณุชูุฏ

**ุงูุฏุงูุงุช ูุงุฒู:**
```bash
# ฺฏุฒูู 1: ุงุณุชูุงุฏู ุงุฒ ฺฏูุงููุงูู ููุฌูุฏ
cp /path/to/your/certificate.crt nginx/ssl/monitoring.crt
cp /path/to/your/private.key nginx/ssl/monitoring.key
chmod 600 nginx/ssl/monitoring.key
chmod 644 nginx/ssl/monitoring.crt

# ฺฏุฒูู 2: ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช ุฎูุฏฺฉุงุฑ
make setup-ssl
```

### 3. ุชูุธูุงุช ุงุญุฑุงุฒ ููุช (Basic Auth)

**ูุถุนุช:** โ ูุงูโูุง ุงุญุฑุงุฒ ููุช ููุฌูุฏ ูุณุชูุฏ

**ุงูุฏุงูุงุช ูุงุฒู:**
```bash
# ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช ุฎูุฏฺฉุงุฑ
make setup-auth

# ุง ุฏุณุช:
mkdir -p nginx/auth
htpasswd -c nginx/auth/grafana.htpasswd grafana_user
htpasswd -c nginx/auth/prometheus.htpasswd prometheus_user
htpasswd -c nginx/auth/alertmanager.htpasswd alertmanager_user
```

### 4. ุชูุธู Domain

**ูุถุนุช:** โ๏ธ ูููุฒ `monitoring.example.com` ุฏุฑ ูุงูโูุง config ุงุณุช

**ุงูุฏุงูุงุช ูุงุฒู:**
```bash
# ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช ุฎูุฏฺฉุงุฑ
make setup-domain your-actual-domain.com

# ุงู ุงุณฺฉุฑูพุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ:
# - ูุงูโูุง nginx/conf.d/*.conf ุฑุง ุจูโุฑูุฒุฑุณุงู ูโฺฉูุฏ
# - docker-compose.yml ุฑุง ุจูโุฑูุฒุฑุณุงู ูโฺฉูุฏ
# - .env ุฑุง ุจูโุฑูุฒุฑุณุงู ูโฺฉูุฏ
```

### 5. ุชูุธู Prometheus Targets

**ูุถุนุช:** โ๏ธ ููุงุฏุฑ placeholder ุฏุฑ `prometheus/prometheus.yml` ูุฌูุฏ ุฏุงุฑุฏ

**ุงูุฏุงูุงุช ูุงุฒู:**
```bash
# ุงุจุชุฏุง .env ุฑุง ุชูุธู ฺฉูุฏ (API_HOST, GATEWAY_HOST, NGINX_HOST, PROMETHEUS_API_KEY)
# ุณูพุณ:
make setup-prometheus

# ุงู ุงุณฺฉุฑูพุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ:
# - prometheus.yml ุฑุง ุงุฒ .env ุจูโุฑูุฒุฑุณุงู ูโฺฉูุฏ
# - API Key ุฑุง ุชูุธู ูโฺฉูุฏ
```

### 6. ุชูุธู Telegram Bot

**ูุถุนุช:** โ๏ธ ูุงุฒ ุจู ุชูุธู ุฏุงุฑุฏ

**ุงูุฏุงูุงุช ูุงุฒู:**
```bash
# ุงุณุชูุงุฏู ุงุฒ ุงุณฺฉุฑูพุช ุฎูุฏฺฉุงุฑ
make setup-telegram

# ุงู ุงุณฺฉุฑูพุช ุดูุง ุฑุง ุฑุงูููุง ูโฺฉูุฏ:
# 1. ุณุงุฎุช ุฑุจุงุช ุงุฒ @BotFather
# 2. ุฏุฑุงูุช Chat ID
# 3. ุชุณุช ุงุชุตุงู
# 4. ุจูโุฑูุฒุฑุณุงู .env
```

### 7. Docker Secrets (ุงุฎุชุงุฑ ุงูุง ุชูุตู ูโุดูุฏ)

**ูุถุนุช:** โ๏ธ ุจุฑุง Production ุชูุตู ูโุดูุฏ

**ุงูุฏุงูุงุช ูุงุฒู:**
```bash
make setup-secrets
```

## ๐ ฺฺฉโูุณุช ูุจู ุงุฒ ุงุณุชูุฑุงุฑ

### ูพุดโูุงุฒูุง ุณุณุชู

- [ ] Docker ูุณุฎู 20.10+ ูุตุจ ุดุฏู
- [ ] Docker Compose ูุณุฎู 2.0+ ูุตุจ ุดุฏู
- [ ] ุญุฏุงูู 4GB RAM (8GB ุชูุตู ูโุดูุฏ)
- [ ] ุญุฏุงูู 50GB ูุถุง ุฎุงู ุฏุณฺฉ
- [ ] ูพูุฑุชโูุง 80 ู 443 ุขุฒุงุฏ ูุณุชูุฏ
- [ ] ุฏุณุชุฑุณ root ุง sudo ุจุฑุง ุชูุธู SSL ู Auth

### ุชูุธูุงุช ุงููุช

- [ ] ูุงู `.env` ุงุฌุงุฏ ู ุชูุธู ุดุฏู
- [ ] ุชูุงู ูพุณูุฑุฏูุง ูพุดโูุฑุถ ุชุบุฑ ฺฉุฑุฏูโุงูุฏ
- [ ] ฺฏูุงููุงููโูุง SSL ุฏุฑ `nginx/ssl/` ูุฑุงุฑ ุฏุงุฑูุฏ
- [ ] ูุงูโูุง Basic Auth ุฏุฑ `nginx/auth/` ุงุฌุงุฏ ุดุฏูโุงูุฏ
- [ ] ุฏุณุชุฑุณโูุง ูุงูโูุง ุตุญุญ ุงุณุช:
  ```bash
  chmod 600 .env
  chmod 600 nginx/ssl/*.key
  chmod 644 nginx/ssl/*.crt
  ```

### ุชูุธูุงุช ุดุจฺฉู

- [ ] Domain name ุฏุฑ ุชูุงู ูุงูโูุง config ุจูโุฑูุฒุฑุณุงู ุดุฏู
- [ ] DNS records ุจู IP ุณุฑูุฑ ุงุดุงุฑู ูโฺฉููุฏ
- [ ] Firewall ุจุฑุง ูพูุฑุชโูุง 80 ู 443 ุจุงุฒ ุงุณุช
- [ ] API_HOST, GATEWAY_HOST, NGINX_HOST ุฏุฑ .env ุชูุธู ุดุฏูโุงูุฏ

### ุชูุธูุงุช Prometheus

- [ ] `make setup-prometheus` ุงุฌุฑุง ุดุฏู
- [ ] PROMETHEUS_API_KEY ุฏุฑ .env ุชูุธู ุดุฏู (ุญุฏุงูู 32 ฺฉุงุฑุงฺฉุชุฑ)
- [ ] ุชูุงู targets ูุงุจู ุฏุณุชุฑุณ ูุณุชูุฏ

### ุชูุธูุงุช Telegram

- [ ] ุฑุจุงุช Telegram ุงุฌุงุฏ ุดุฏู
- [ ] TELEGRAM_BOT_TOKEN ู TELEGRAM_CHAT_ID ุฏุฑ .env ุชูุธู ุดุฏูโุงูุฏ
- [ ] ุชุณุช ุงุชุตุงู ูููู ุจูุฏู: `make test-alert`

## ๐ ูุฑุงุญู ุงุณุชูุฑุงุฑ

### ุฑูุด 1: ุงุณุชูุฑุงุฑ ฺฉุงูู ุฎูุฏฺฉุงุฑ (ุชูุตู ูโุดูุฏ)

```bash
# ุงู ุฏุณุชูุฑ ุชูุงู ูุฑุงุญู ุฑุง ุจู ุตูุฑุช ุชุนุงูู ุงูุฌุงู ูโุฏูุฏ:
make setup
```

ุงู ุฏุณุชูุฑ ุดุงูู:
1. ุชูุธู SSL
2. ุชูุธู Basic Auth
3. ุชูุธู Docker Secrets (ุงุฎุชุงุฑ)
4. ุจูโุฑูุฒุฑุณุงู Domain
5. ุงุนุชุจุงุฑุณูุฌ Environment
6. ุงุณุชูุฑุงุฑ ุณุฑูุณโูุง

### ุฑูุด 2: ุงุณุชูุฑุงุฑ ุฏุณุช (ฺฏุงู ุจู ฺฏุงู)

```bash
# 1. ุงุฌุงุฏ .env
cp .env.example .env
nano .env  # ูุฑุงุด ู ุชูุธู ููุงุฏุฑ

# 2. ุชูุธู SSL
make setup-ssl

# 3. ุชูุธู Basic Auth
make setup-auth

# 4. ุชูุธู Domain
make setup-domain your-domain.com

# 5. ุชูุธู Prometheus
make setup-prometheus

# 6. ุชูุธู Telegram
make setup-telegram

# 7. ุงุนุชุจุงุฑุณูุฌ
make validate

# 8. ุงุณุชูุฑุงุฑ
make deploy
```

## โ ุจุฑุฑุณ ูพุณ ุงุฒ ุงุณุชูุฑุงุฑ

```bash
# ุจุฑุฑุณ ูุถุนุช ุณุฑูุณโูุง
make status

# ุจุฑุฑุณ ุณูุงูุช ุณุณุชู
make health

# ุจุฑุฑุณ Prometheus Targets
make targets

# ุชุณุช Telegram Alerts
make test-alert

# ููุงุด URLูุง ุฏุณุชุฑุณ
make show-urls
```

## ๐ ูุดฺฉูุงุช ุงุญุชูุงู ู ุฑุงูโุญู

### ูุดฺฉู: ุณุฑูุณโูุง ุดุฑูุน ููโุดููุฏ

**ุฑุงูโุญู:**
```bash
# ุจุฑุฑุณ ูุงฺฏโูุง
make logs

# ุจุฑุฑุณ ูุถุนุช
make status

# ุจุฑุฑุณ ูุดฺฉูุงุช ุฑุงุฌ:
# 1. ูุงู .env ูุฌูุฏ ูุฏุงุฑุฏ ุง ูุงูุต ุงุณุช
# 2. ฺฏูุงููุงููโูุง SSL ููุฌูุฏ ูุณุชูุฏ
# 3. ูพูุฑุชโูุง ุฏุฑ ุญุงู ุงุณุชูุงุฏู ูุณุชูุฏ
# 4. ุฏุณุชุฑุณโูุง ูุงูโูุง ูุงุฏุฑุณุช ุงุณุช
```

### ูุดฺฉู: SSL Certificate Error

**ุฑุงูโุญู:**
```bash
# ุจุฑุฑุณ ูุฌูุฏ ฺฏูุงููุงููโูุง
ls -la nginx/ssl/

# ุจุฑุฑุณ ูุฑูุช ฺฏูุงููุงูู
openssl x509 -in nginx/ssl/monitoring.crt -text -noout

# ุจุฑุฑุณ ุฏุณุชุฑุณโูุง
chmod 600 nginx/ssl/*.key
chmod 644 nginx/ssl/*.crt
```

### ูุดฺฉู: Prometheus Targets Down

**ุฑุงูโุญู:**
```bash
# ุจุฑุฑุณ ุชูุธูุงุช ุฏุฑ .env
grep -E "API_HOST|GATEWAY_HOST|NGINX_HOST" .env

# ุจูโุฑูุฒุฑุณุงู Prometheus config
make setup-prometheus

# ุจุฑุฑุณ ุฏุณุชุฑุณ ุดุจฺฉู
docker exec prometheus ping -c 3 $API_HOST
```

## ๐ ุงุฏุฏุงุดุชโูุง ููู

1. **ูุฑฺฏุฒ ูุงู `.env` ุฑุง commit ูฺฉูุฏ** - ุงู ูุงู ุฏุฑ `.gitignore` ุงุณุช
2. **ฺฏูุงููุงููโูุง SSL ุฑุง commit ูฺฉูุฏ** - ุฏุฑ `.gitignore` ูุณุชูุฏ
3. **ูุงูโูุง ุงุญุฑุงุฒ ููุช ุฑุง commit ูฺฉูุฏ** - ุฏุฑ `.gitignore` ูุณุชูุฏ
4. **ุงุฒ ูพุณูุฑุฏูุง ูู ุงุณุชูุงุฏู ฺฉูุฏ** - ุญุฏุงูู 32 ฺฉุงุฑุงฺฉุชุฑ ุจุฑุง Grafana
5. **ุจุฑุง Production ุงุฒ Docker Secrets ุงุณุชูุงุฏู ฺฉูุฏ** - ุงููโุชุฑ ุงุฒ Environment Variables

## ๐ ุฏุณุชูุฑุงุช ููุฏ

```bash
# ููุงุด ฺฉูฺฉ
make help

# ุดุฑูุน ุณุฑูุณโูุง
make start

# ุชููู ุณุฑูุณโูุง
make stop

# ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ
make restart

# ูุดุงูุฏู ูุงฺฏโูุง
make logs [service-name]

# ูพุดุชุจุงูโฺฏุฑ Grafana
make backup

# ุจูโุฑูุฒุฑุณุงู ุณุฑูุณโูุง
make update
```

## โ ูุถุนุช ููุง

ูพุณ ุงุฒ ุชฺฉูู ุชูุงู ููุงุฑุฏ ุจุงูุงุ ูพุฑูฺู ุขูุงุฏู ุงุณุชูุฑุงุฑ ุฑู ุณุฑูุฑ ุงุณุช.

**ูุฑุญูู ููุง:**
```bash
make validate  # ุจุฑุฑุณ ููุง
make deploy    # ุงุณุชูุฑุงุฑ
make health    # ุจุฑุฑุณ ุณูุงูุช
```

